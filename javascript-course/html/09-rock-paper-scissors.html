<!DOCTYPE html>
<html>
  <head>
    <title>Booleans</title>
    <link rel = "stylesheet" href = "styles/09-rock-paper-scissors.css"> 
  </head>
  <body>

    <h1 class = "intro">
      Welcome to Rock, Paper, Scissors
    </h1>

    <!-- player buttons-->

    <div class = "Buttons">
    
      <button class = "playRock" onclick= "playGame('rock')">
        Rock
      </button>
      <button class = "playPaper" onclick= " playGame('paper') ">
        Paper
      </button>
      <button class = "playScissors" onclick= " playGame('scissors') ">
        Scissors
      </button>
    </div>
    
      
      <p>Result:</p> 
      <p id = 'matchup'> </p>
      <p id = "result"> </p> 
      <p id = "scoreboard"> </p>
      <div>
      <button class = 'Reset' onclick ='resetScore()'> 
        Reset Score
      </button>
    </div>

      <script>
      
      let machineMove = '';
      let pMove = '';
      let randomNumber = 0;
      let result = ' ';
      //local storage setup, works with key value pair, both are strings
      let score = JSON.parse(localStorage.getItem('score')) || {
        result: '',
        wins: 0,
        ties: 0,
        losses: 0
      };
      function resetScore(){
        score = {
        result: '',
        wins: 0,
        ties: 0,
        losses: 0
      };
      report();
      }
      
      //functions
      function report() {
      document.getElementById("matchup").textContent = `you played ${pMove} - machine played: ${machineMove}`
      document.getElementById("result").textContent = `you ${score.result}`;
      document.getElementById("scoreboard").textContent = `wins: ${score.wins} ties: ${score.ties} losses: ${score.losses}`;
      }
      console.log(localStorage.getItem('score'));
      report();
      function playGame(playerMove){
        pMove = playerMove;
        machMove();
        if (playerMove=='rock'){
            if(machineMove==='rock'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='paper') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        else if(playerMove=='paper'){
          if(machineMove==='paper'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='scissors') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        else{
            if(machineMove==='scissors'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='rock') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        report();
        localStorage.setItem('score', JSON.stringify(score));
        return;
      }
      function machMove(){
        randomNumber = Math.random();
        if(randomNumber < (1/3)){
          machineMove = 'rock';
        }
        else if(randomNumber < (2/3)){  
          machineMove = 'paper';
        }
        else{
          machineMove = 'scissors';
        }
        return machineMove;
      }
      

      </script>
  </body>