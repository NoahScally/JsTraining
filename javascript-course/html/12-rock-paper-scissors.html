<!DOCTYPE html>
<html>
  <head>
    <title>12 advanced functions</title>
    <style>
    
      body{
        background-color: black;
        font-family: Georgia, 'Times New Roman', Times, serif;
      }
      h1, p{
        color:azure;
        font-size: 30px;
      }
      .intro{
        font-size: 30px;
        margin-top: 20px;
      }
      Button{
        height:120px;
        width:120px;
        border-color:azure;
        border-radius: 55px;
        border-width: 10px;
      }
      .rock{
        height: 50px;
      }
      .paper{
        height: 50px;
      }
      .Scissors{
        height: 50px;
      }
</style>

  </head>
  <body>

    <h1 class = "intro">
      Welcome to Rock, Paper, Scissors
    </h1>

    <!-- player buttons-->

    <div class = "Buttons">
    
      <button class = "playRock" onclick= "playGame('rock')">
        Rock
      </button>
      <button class = "playPaper" onclick= " playGame('paper') ">
        Paper
      </button>
      <button class = "playScissors" onclick= " playGame('scissors') ">
        Scissors
      </button>
    </div>
    
      
      <p>Result:</p> 
      <p id = 'matchup'> </p>
      <p id = "result"> </p> 
      <p id = "scoreboard"> </p>
      <div>
      <button class = 'Reset' onclick ='resetScore()'> 
        Reset Score
      </button>
      <button class = 'autoPlay' onclick ='autoPlay()'> 
        autoPlay
      </button>
    </div>

      <script>
          let isPlaying = false;
          let intervalID;
        function autoPlay(){
          if(!isPlaying){
            intervalID = setInterval(() => {const player2 = machMove();
              playGame(player2)},3000);
            isplaying = true;
          }
          else{
            clearInterval(intervalID);
            isPlaying = false;
          }
        }
      
      let machineMove = '';
      let pMove = '';
      let randomNumber = 0;
      let result = ' ';
      //local storage setup, works with key value pair, both are strings
      let score = JSON.parse(localStorage.getItem('score')) || {
        result: '',
        wins: 0,
        ties: 0,
        losses: 0
      };
      function resetScore(){
        score = {
        result: '',
        wins: 0,
        ties: 0,
        losses: 0
      };
      report();
      }
      
      //functions
      function report() {
      document.getElementById("matchup").textContent = `you played ${pMove} - machine played: ${machineMove}`
      document.getElementById("result").textContent = `you ${score.result}`;
      document.getElementById("scoreboard").textContent = `wins: ${score.wins} ties: ${score.ties} losses: ${score.losses}`;
      }
      console.log(localStorage.getItem('score'));
      report();
      function playGame(playerMove){
        pMove = playerMove;
        machMove();
        if (playerMove=='rock'){
            if(machineMove==='rock'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='paper') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        else if(playerMove=='paper'){
          if(machineMove==='paper'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='scissors') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        else{
            if(machineMove==='scissors'){
            result = 'tie';
            score.ties++;
          }
          else if(machineMove==='rock') {
            result = 'lose';
            score.losses++;
          }
          else{
            result = 'win';
            score.wins++;
          }
        }
        report();
        localStorage.setItem('score', JSON.stringify(score));
        return;
      }
      function machMove(){
        randomNumber = Math.random();
        if(randomNumber < (1/3)){
          machineMove = 'rock';
        }
        else if(randomNumber < (2/3)){  
          machineMove = 'paper';
        }
        else{
          machineMove = 'scissors';
        }
        return machineMove;
      }
      

      </script>
  </body>